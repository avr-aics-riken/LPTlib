/*
 * LPTlib
 * Lagrangian Particle Tracking library
 *
 * Copyright (c) 2012-2013 Advanced Institute for Computational Science, RIKEN. 
 * All rights reserved.
 *
 */
 

Prerequisite
============
- MPI library
- PMlib is required if a timing report option is selected.



How to compile
==============

1. パスの設定
   make_setting.LPTを編集し、以下の変数を設定します。
     PMLIB_DIR: PMlibのインストール先ディレクトリ
     LPT_DIR:   LPTのアーカイブを展開したディレクトリ(このファイルが存在するディレクトリ)


2. Buildに使用するコンパイラ, MPIライブラリ等の設定
   Mkinclude.LPT内でインクルードしているファイルを変更し、
   コンパイラ名, コンパイルオプション等を指定します。
   本アーカイブ内には、参考として以下の3種類の環境向けの設定ファイルを同梱しています。 
      Mkinclude.GNU_OpenMPI     gcc version 4.4 + OpenMPI  (CentOS 5.5)
      Mkinclude.Intel_IntelMPI  Intel Cluster Toolkit version 12.
      Mkinclude.Intel_OpenMPI   Inte C++ Compiler ver. 12 + OpenMPI

   これらのファイル内ではFortranおよびCコンパイラに関しても設定していますが
   本ライブラリのビルド時にはC++コンパイラしか使用していません。


3. ライブラリおよびファイルコンバータのbuild
   以下のコマンドを実行すると、libディレクトリ内にLPTライブラリ(libLPT.a)が、
   binディレクトリ内にファイルコンバータの実行ファイル(FileConverter)が生成されます。

     >make clean; make depend;make


4. ref

Intel openMPI
FC       = env OMPI_FC=ifort OMPI_F77=ifort mpif90
FFLAGS   = -O3 -ipo -warn -traceback #-vec-report5
CC       = env OMPI_CC=icc mpicc
CCFLAGS  = -O3 -ipo -Wall -traceback #-vec-report5
CXX      = env OMPI_CXX=icpc mpicxx
CXXFLAGS = $(CCFLAGS) -I./
LINKER   = $(CXX)
LDFLAGS  = 
AR       = xiar rc
#AR      = xiar rc -qopt-report=3
RANLIB   = ranlib


Intel IntelMPI
FC       = mpiifort
FFLAGS   = -g -O2 -warn -traceback -opt-report 2 -vec-report5
CC       = mpiicc
CCFLAGS  = -g -O2 -Wall -traceback -opt-report 2 -vec-report5
CXX      = mpiicpc
CXXFLAGS = $(CCFLAGS) -I./ -DMPICH_SKIP_MPICXX
LINKER   = $(CXX)
LDFLAGS  = 
AR       = ar rc
RANLIB   = ranlib


FC       = env OMPI_FC=gfortran OMPI_F77=gfortran mpif90
FFLAGS   = -g -O2 -march=native
CC       = env OMPI_CC=gcc mpicc
CCFLAGS  = -g -O2 -march=native
CXX      = env OMPI_CXX=g++ mpicxx
CXXFLAGS = $(CCFLAGS) -I./
LINKER   = $(CXX)
LDFLAGS  = 
AR       = ar rc
RANLIB   = ranlib


FC       = mpifrtpx
FFLAGS   = -g -O3 -Kfast -Kocl -Koptmsg=2
CC       = mpifccpx
CCFLAGS  = -g -O3 -Kfast -Kocl -Koptmsg=2 -Nsrc -Nsta -Krestp=arg
CXX      = mpiFCCpx
CXXFLAGS = $(CCFLAGS) -I./
LINKER   = $(CXX)
LDFLAGS  = $(CXXFLAGS)
AR       = ar rc
RANLIB   = ranlib
